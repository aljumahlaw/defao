# ๐ ุชูุฑูุฑ ุงูุชุดุฎูุต - ุงููุดููุชุงู

## ๐จ ูุดููุฉ 1 - ุญุฐู ุงููุซุงุฆู (ูุฑุฏู + ุฌูุงุนู)

### ๐ ุงููููุงุช ุงููุนููุฉ:

**Livewire Component:**
- ุงูููู: `app/Livewire/Documents/DocumentTable.php`
- Methods ููุฌูุฏุฉ:
  - โ `bulkDelete()` - ุงูุณุทุฑ 532-560 (ุญุฐู ุฌูุงุนู)
  - โ `bulkAction()` - ุงูุณุทุฑ 415-461 (ูุญุชูู ุนูู `'delete' => $count = $documentsQuery->delete()` ูู ุงูุณุทุฑ 441)
- Methods **ุบูุฑ ููุฌูุฏุฉ**:
  - โ **ูุง ููุฌุฏ `delete($id)` ููุญุฐู ุงููุฑุฏู**
  - โ **ูุง ููุฌุฏ `destroy($id)` ููุญุฐู ุงููุฑุฏู**

**Blade Template:**
- ุงูููู: `resources/views/livewire/documents/document-table.blade.php`
- โ `wire:click="bulkDelete"` ููุฌูุฏ ูู ุงูุณุทุฑ 94 (ูููุงุฆูุฉ ุงูููุณุฏูุฉ)
- โ `bulkAction()` ูุน `option value="delete"` ูู ุงูุณุทุฑ 334 (ููู select ูู ุงูู toolbar)
- โ **ูุง ููุฌุฏ ุฒุฑ ุญุฐู ูุฑุฏู ูู ุฌุฏูู ุงููุซุงุฆู** (ุงูุณุทูุฑ 511-542 ุชุญุชูู ุนูู: ุนุฑุถุ ุชูุฒููุ ูุณุฎุฉ ุฌุฏูุฏุฉุ ุฃุฑุดูุฉุ ุฅุฑุณุงู ุจุงูุจุฑูุฏ - **ููู ูุง ููุฌุฏ ุฒุฑ ุญุฐู**)

**Model:**
- ุงูููู: `app/Models/Document.php`
- โ `use SoftDeletes;` ููุฌูุฏ (ุงูุณุทุฑ 7)
- โ `protected $fillable` ููุฌูุฏ (ุงูุณุทูุฑ 13-26) - **ูุง ูุญุชูู ุนูู `id`** (ุตุญูุญุ ูุฃู `id` ูุง ูุฌุจ ุฃู ูููู ูู fillable)

**Policy:**
- ุงูููู: `app/Policies/DocumentPolicy.php`
- โ `public function delete(User $user, Document $document)` ููุฌูุฏ (ุงูุณุทุฑ 42-46)
- Policy logic: ูุนูุฏ `false` ูููุณุงุนุฏููุ `true` ูููุฏูุฑ ุฃู ูุงูู ุงููุซููุฉ

### ๐จ ุงูุณุจุจ ุงููุญุชูู:

1. **ุงูุญุฐู ุงููุฑุฏู:**
   - โ **ูุง ููุฌุฏ method `delete($id)` ูู `DocumentTable` component**
   - โ **ูุง ููุฌุฏ ุฒุฑ ุญุฐู ูู Blade template** (ุงูุณุทูุฑ 511-542)
   - โ Policy ููุฌูุฏุฉ ูุตุญูุญุฉ

2. **ุงูุญุฐู ุงูุฌูุงุนู:**
   - โ Method `bulkDelete()` ููุฌูุฏุฉ ูุตุญูุญุฉ
   - โ Method `bulkAction()` ูุน option `delete` ููุฌูุฏุฉ
   - โ๏ธ **ููู:** `bulkAction()` ูุณุชุฎุฏู `Document::whereIn('id', $this->selected)->delete()` ูุจุงุดุฑุฉ ุจุฏูู Policy check
   - โ ุจูููุง `bulkDelete()` ูุณุชุฎุฏู Policy check (ุงูุณุทูุฑ 534-560)

### ๐ฌ ุงุฎุชุจุงุฑ ุณุฑูุน:

```php
// ุฃุถู ูุคูุชุงู ูู DocumentTable.php ููุญุฐู ุงููุฑุฏู:
public function delete($id)
{
    dd('delete method called', $id);  // ูู ูุธูุฑ ุนูุฏ ุงูุถุบุทุ
}

// ุชุฃูุฏ ูู ุฃู bulkDelete ูุชู ุงุณุชุฏุนุงุคู:
public function bulkDelete()
{
    dd('bulkDelete called', $this->selected);  // ูู ูุธูุฑ ุนูุฏ ุงูุญุฐู ุงูุฌูุงุนูุ
}
```

### ๐ ุงูููุงุญุธุงุช ุงูุฅุถุงููุฉ:

- โ SoftDeletes ููุนู - ุงูุญุฐู ุณูููู soft delete (ูุง ุญุฐู ููุงุฆู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช)
- โ๏ธ **ุงููุดููุฉ ุงูุฑุฆูุณูุฉ:** ูุง ููุฌุฏ UI ููุญุฐู ุงููุฑุฏู ูู Blade template
- โ๏ธ **ุงููุดููุฉ ุงูุซุงูููุฉ:** `bulkAction()` ูุน option `delete` ูุง ูุชุญูู ูู Policy (ููู `bulkDelete()` ูุชุญูู)

---

## ๐จ ูุดููุฉ 2 - ุชุนุทูู/ุชูุนูู ุงูููุธููู (is_active)

### ๐ ุงููููุงุช ุงููุนููุฉ:

**Livewire Component:**
- ุงูููู: `app/Livewire/Admin/UserManagement.php`
- โ Method ููุฌูุฏุฉ: `toggleActive($userId)` - ุงูุณุทุฑ 92-106
- โ Logic ุตุญูุญ: `$user->update(['is_active' => !$user->is_active])` - ุงูุณุทุฑ 102

**Blade Template:**
- ุงูููู: `resources/views/livewire/admin/user-management.blade.php`
- โ `wire:click="toggleActive({{ $user->id }})"` ููุฌูุฏ ูู ุงูุณุทุฑ 167
- โ Button ููุฌูุฏ ูู ุงูุณุทูุฑ 166-175

**User Model:**
- ุงูููู: `app/Models/User.php`
- โ๏ธ **ุงููุดููุฉ:** `is_active` **ุบูุฑ ููุฌูุฏ ูู `$fillable`**
- โ `protected $fillable = []` - ุบูุฑ ููุฌูุฏ (ูู ูุชู ุชุนุฑููู)
- โ ููู: `protected $guarded = ['id', 'role', 'is_active', 'password_changed_at'];` - ุงูุณุทุฑ 36
- ๐จ **`is_active` ููุฌูุฏ ูู `$guarded`** ููุง ูููุน mass assignment!

### ๐จ ุงูุณุจุจ ุงููุญุชูู:

1. **`is_active` ูู `$guarded`:**
   - โ `protected $guarded = ['id', 'role', 'is_active', 'password_changed_at'];`
   - ๐จ ูุฐุง ูุนูู ุฃู `is_active` **ูุญุธูุฑ** ูู mass assignment
   - โ `$user->update(['is_active' => !$user->is_active])` **ูู ูุนูู** ุจุณุจุจ guarded

2. **ุงูุญู ุงููุทููุจ:**
   - โ ูุฌุจ ุฅุฒุงูุฉ `is_active` ูู `$guarded`
   - ุฃู ุงุณุชุฎุฏุงู `$user->is_active = !$user->is_active; $user->save();` ูุจุงุดุฑุฉ

### ๐ฌ ุงุฎุชุจุงุฑ ุณุฑูุน:

```php
// ุฃุถู ูุคูุชุงู ูู toggleActive method:
public function toggleActive($userId)
{
    dd('toggleActive called', $userId);  // ูู ูุธูุฑ ุนูุฏ ุงูุถุบุทุ
    
    $user = User::findOrFail($userId);
    dd('user found', $user->is_active);  // ูุง ูู ุงููููุฉ ุงูุญุงููุฉุ
    
    // ุญุงูู ุงูุชุญุฏูุซ:
    $result = $user->update(['is_active' => !$user->is_active]);
    dd('update result', $result, 'new value', $user->fresh()->is_active);  // ูู ุชู ุงูุชุญุฏูุซุ
}
```

### ๐ ุงูููุงุญุธุงุช ุงูุฅุถุงููุฉ:

- โ Method ููุฌูุฏุฉ ูุตุญูุญุฉ
- โ Blade template ุตุญูุญ
- โ `is_active` ููุฌูุฏ ูู `casts()` ูู `boolean` (ุงูุณุทุฑ 58)
- ๐จ **ุงููุดููุฉ ุงูุฑุฆูุณูุฉ:** `is_active` ูู `$guarded` ูููุน ุงูุชุญุฏูุซ

---

## ๐ ููุฎุต ุณุฑูุน:

### ูุดููุฉ 1 - ุงูุญุฐู:
- โ ุงูุญุฐู ุงูุฌูุงุนู: Method ููุฌูุฏุฉ ููู ูุฏ ุชุญุชุงุฌ Policy check ูู `bulkAction()`
- โ **ุงูุญุฐู ุงููุฑุฏู: method ุบูุฑ ููุฌูุฏ + ุฒุฑ ุบูุฑ ููุฌูุฏ ูู Blade**

### ูุดููุฉ 2 - ุงูุชุนุทูู:
- โ Method ููุฌูุฏุฉ
- โ Blade template ุตุญูุญ
- ๐จ **`is_active` ูู `$guarded` ูููุน ุงูุชุญุฏูุซ**


