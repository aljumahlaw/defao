---
**Updated:** 2025-12-22 - Defao v1.0.1  
**Status:** โ Production Ready  
**Features:** Workflow, Reports link, Arabic toasts  
---

# ููุฎุต ุณุฑูุน - ูุฎุทุท Swimlane Diagram

## ๐ ุงูุฃุฏูุงุฑ (Actors)

| ุงูุฏูุฑ | ุงูููุชุงุญ | ุงูุตูุงุญูุงุช |
|------|---------|-----------|
| **ููุดุฆ ุงููุซููุฉ** | `user_id` | โ ุนุฑุถุ โ ุชุญุฏูุซุ โ๏ธ ุฃุฑุดูุฉ/ุญุฐู (ุจุฏูู Policy) |
| **ููููู ุงููุซููุฉ** | `assignee_id` | โ ุนุฑุถุ โ ุชุญุฏูุซุ โ ุชุบููุฑ ุงููุฑุญูุฉุ โ๏ธ ุฃุฑุดูุฉ/ุญุฐู (ุจุฏูู Policy) |
| **ูุณุชุฎุฏู ุขุฎุฑ** | - | โ ุนุฑุถุ โ ุชุญุฏูุซุ โ ุชุบููุฑ ุงููุฑุญูุฉ |

**ููุงุญุธุฉ:** ุนูุฏ ุงูุฅูุดุงุกุ `assignee_id = auth()->id()` (ุงูููุดุฆ ููุณู).

---

## ๐ ุงูุณููุงุฑูู ุงููุงูู

### ุงููุณุงุฑ ุงููููุฐุฌู:
1. **ููุดุฆ** โ ุฅูุดุงุก ูุซููุฉ (`draft`)
2. **ููููู** โ ูุฑุงุฌุนุฉ (`review1`)
3. **ููููู** โ ุชุฏููู (`proofread`)
4. **ููููู** โ ููุงููุฉ ููุงุฆูุฉ (`finalapproval`)
5. **ุฃู ูุณุชุฎุฏู** โ ุฃุฑุดูุฉ (`is_archived = true`)

### ุงููุณุงุฑุงุช ุงูุจุฏููุฉ:
- **ุงูุฑูุถ:** ุฃู ูุฑุญูุฉ โ `draft` (ุงูููููู)
- **ุงูููุงููุฉ ุงููุจุงุดุฑุฉ:** `draft` โ `finalapproval` (ุงูููููู)
- **ุงูุฃุฑุดูุฉ ุงููุจูุฑุฉ:** ุฃู ูุฑุญูุฉ โ `Archived` (ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ)

---

## ๐จ ุงููุดุงูู ุงูุญุฑุฌุฉ

### 1. ุนุฏู ูุฌูุฏ ูุงุฌูุฉ ูุชุบููุฑ `assignee_id`
- **ุงููุดููุฉ:** ูุง ูููู ุฅุณูุงุฏ ูุซููุฉ ููุณุชุฎุฏู ุขุฎุฑ
- **ุงูุญู:** ุฅุถุงูุฉ dropdown ูู `DocumentDetail`

### 2. ุนุฏู ูุฌูุฏ Policy ูู `WorkflowStageCard`
- **ุงููุดููุฉ:** `advanceStage()` ู `rejectStage()` ูุณุชุฎุฏูุงู `visibleTo` ููุท
- **ุงูุญู:** ุงุณุชุฎุฏุงู `DocumentPolicy@update`

### 3. ุนุฏู ูุฌูุฏ Policy ูู `bulkAction`
- **ุงููุดููุฉ:** ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ ููููู ุชุบููุฑ ูุฑุญูุชูุง
- **ุงูุญู:** ุงุณุชุฎุฏุงู `DocumentPolicy@update` ููู ูุซููุฉ

### 4. ุนุฏู ูุฌูุฏ ุฅุดุนุงุฑุงุช
- **ุงููุดููุฉ:** ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุนูุฏ ุฅุณูุงุฏ ูุซููุฉ ุฃู ุชุบููุฑ ุงููุฑุญูุฉ
- **ุงูุญู:** ุฅุถุงูุฉ ูุธุงู ุฅุดุนุงุฑุงุช

---

## ๐ ููุงุท ุงููุฑุงุฑ

### ูุฑุงุฑ ุงููุฑุงุฌุนุฉ:
- โ **ููุงููุฉ** โ `finalapproval` (ุงูููููู)
- โก๏ธ **ุชุญููู** โ ุงููุฑุญูุฉ ุงูุชุงููุฉ (ุงูููููู)
- โ **ุฑูุถ** โ `draft` (ุงูููููู)

### ุงูุชุดุงู ุฎุทุฃ:
- โ **reject()** โ ูุนูู (ูุญูู ุจู Policy)
- โ **bulkAction('stage_draft')** โ ุจุฏูู Policy

### ุงููุณุชูุฏุงุช ุงููุชุฃุฎุฑุฉ:
- `review1` > 7 ุฃูุงู = ูุชุฃุฎุฑุฉ
- `proofread` > 5 ุฃูุงู = ูุชุฃุฎุฑุฉ
- `finalapproval` > 3 ุฃูุงู = ูุชุฃุฎุฑุฉ
- โ๏ธ **ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ**

---

## ๐ง ุงูุฎุฏูุงุช ุงููุณุงูุฏุฉ

### DocumentTasks:
- โ ุฅุถุงูุฉ ููุงู (ููุดุฆ/ููููู)
- โ ุฅููุงู ููุงู (ููุดุฆ/ููููู)
- โ ุญุฐู ููุงู (ุจุฏูู Policy)

### Bulk Actions:
- โ ุฃุฑุดูุฉ (ุจุฏูู Policy)
- โ ุญุฐู (ุจุฏูู Policy)
- โ ุชุบููุฑ ูุฑุญูุฉ (ุจุฏูู Policy)

### Export/Print:
- โ ุชุตุฏูุฑ PDF (ูุนูู)
- โ๏ธ ุชูุฒูู ููู (TODO - Phase 6)

### Notifications:
- โ **ุบูุฑ ููุฌูุฏ**

---

## ๐ฏ ุงูุชูุตูุงุช ุงูุณุฑูุนุฉ

### ุฃููููุงุช ุนุงุฌูุฉ:
1. โ ุฅุถุงูุฉ ูุงุฌูุฉ ูุชุบููุฑ `assignee_id`
2. โ ุฅุตูุงุญ `WorkflowStageCard` ูุงุณุชุฎุฏุงู Policy
3. โ ุฅุตูุงุญ `bulkAction` ูุงุณุชุฎุฏุงู Policy
4. โ ุฅุถุงูุฉ ูุธุงู ุฅุดุนุงุฑุงุช

---

## ๐ ุงููููุงุช ุงููุฑุฌุนูุฉ

- **`WORKFLOW_SWIMLANE_DIAGRAM.md`** - ุงููุณุชูุฏ ุงูุชูุตููู ุงููุงูู
- **`WORKFLOW_SWIMLANE_DIAGRAMS.md`** - ุงููุฎุทุทุงุช ุงูุชูุตูููุฉ
- **`WORKFLOW_STEPS_TABLE.csv`** - ุฌุฏูู ุงูุฎุทูุงุช
- **`WORKFLOW_SWIMLANE_SUMMARY.md`** - ูุฐุง ุงูููู (ุงูููุฎุต)

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-01-27

