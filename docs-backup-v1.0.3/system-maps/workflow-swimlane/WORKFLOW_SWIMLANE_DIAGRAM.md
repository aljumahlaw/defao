---
**Updated:** 2025-12-22 - Defao v1.0.1  
**Status:** โ Production Ready  
**Features:** Workflow, Reports link, Arabic toasts  
---

# ูุฎุทุท Swimlane Diagram ุดุงูู ูุณูุฑ ุงูุนูู (End-to-End Workflow)

## ๐ ุงูููุฑุณ

1. [ุงูุฃุฏูุงุฑ (Actors/Roles)](#1-ุงูุฃุฏูุงุฑ-actorsroles)
2. [ุงูุณููุงุฑูู ุงููุงูู](#2-ุงูุณููุงุฑูู-ุงููุงูู)
3. [Swimlane Diagram](#3-swimlane-diagram)
4. [ุฌุฏูู ุงูุฎุทูุงุช ุงูุชูุตููู](#4-ุฌุฏูู-ุงูุฎุทูุงุช-ุงูุชูุตููู)
5. [ููุงุท ุงููุฑุงุฑ](#5-ููุงุท-ุงููุฑุงุฑ)
6. [ุงูุฎุฏูุงุช ุงููุณุงูุฏุฉ](#6-ุงูุฎุฏูุงุช-ุงููุณุงูุฏุฉ)

---

## 1. ุงูุฃุฏูุงุฑ (Actors/Roles)

### ุงูุฃุฏูุงุฑ ุงููุณุชูุชุฌุฉ ูู ุงูููุฏ:

| ุงูุฏูุฑ | ุงูููุชุงุญ | ุงููุตู | ุงูุตูุงุญูุงุช |
|------|---------|-------|-----------|
| **ููุดุฆ ุงููุซููุฉ** | `user_id` | ุงููุณุชุฎุฏู ุงูุฐู ุฃูุดุฃ ุงููุซููุฉ | โ ุนุฑุถุ โ ุชุญุฏูุซุ โ๏ธ ุฃุฑุดูุฉ/ุญุฐู (ุจุฏูู Policy) |
| **ููููู ุงููุซููุฉ** | `assignee_id` | ุงููุณุชุฎุฏู ุงูููููู ุจุงููุซููุฉ | โ ุนุฑุถุ โ ุชุญุฏูุซุ โ ุชุบููุฑ ุงููุฑุญูุฉุ โ๏ธ ุฃุฑุดูุฉ/ุญุฐู (ุจุฏูู Policy) |
| **ูุณุชุฎุฏู ุขุฎุฑ** | - | ุฃู ูุณุชุฎุฏู ุขุฎุฑ | โ ุนุฑุถุ โ ุชุญุฏูุซุ โ ุชุบููุฑ ุงููุฑุญูุฉ |

**ููุงุญุธุฉ:** ุนูุฏ ุงูุฅูุดุงุกุ `assignee_id = auth()->id()` (ุฃู ุงูููุดุฆ ููุณู).

---

## 2. ุงูุณููุงุฑูู ุงููุงูู

### ุงููุณุงุฑ ุงููููุฐุฌู:
1. **ุฅูุดุงุก ูุซููุฉ** โ `draft` (ุงูููุดุฆ)
2. **ูุฑุงุฌุนุฉ ุฃููู** โ `review1` (ุงูููููู)
3. **ุชุฏููู** โ `proofread` (ุงูููููู)
4. **ููุงููุฉ ููุงุฆูุฉ** โ `finalapproval` (ุงูููููู)
5. **ุฃุฑุดูุฉ** โ `is_archived = true` (ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ)

### ุงููุณุงุฑุงุช ุงูุจุฏููุฉ:
- **ุงูุฑูุถ:** ุฃู ูุฑุญูุฉ โ `draft` (ุงูููููู)
- **ุงูููุงููุฉ ุงููุจุงุดุฑุฉ:** `draft` โ `finalapproval` (ุงูููููู)
- **ุงูุฃุฑุดูุฉ ุงููุจูุฑุฉ:** ุฃู ูุฑุญูุฉ โ `Archived` (ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ)
- **ุงูุญุฐู:** ุฃู ูุฑุญูุฉ โ `Deleted` (ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ)

---

## 3. Swimlane Diagram

```mermaid
flowchart TB
    subgraph Creator["๐ค ููุดุฆ ุงููุซููุฉ (Creator)<br/>user_id"]
        C1[1. ุฅูุดุงุก ูุซููุฉ ุฌุฏูุฏุฉ<br/>DocumentUpload::save]
        C2[2. ุฑูุน ุงูููู<br/>store to local]
        C3[3. Document::create<br/>current_stage = 'draft'<br/>assignee_id = auth()->id()]
        C4[4. DocumentActivity::create<br/>'created' + 'uploaded']
        C5[5. redirect โ /documents]
        C6[6. ุนุฑุถ ุงููุซููุฉ<br/>DocumentDetail]
        C7[7. ุฅุถุงูุฉ ููุงู ูุฑุนูุฉ<br/>DocumentTasks::addTask]
        C8[8. ูุชุงุจุนุฉ ุงูุชูุฏู<br/>ุนุฑุถ activityLog]
        C9[9. ุฃุฑุดูุฉ ุงููุซููุฉ<br/>DocumentTable::archiveDocument<br/>โ๏ธ ุจุฏูู Policy]
    end
    
    subgraph Assignee["๐ค ููููู ุงููุซููุฉ (Assignee)<br/>assignee_id"]
        A1[1. ุงุณุชูุจุงู ุฅุดุนุงุฑ<br/>โ๏ธ ุบูุฑ ููุฌูุฏ ุญุงููุงู]
        A2[2. ุนุฑุถ ุงููุซููุฉ<br/>DocumentDetail]
        A3[3. ูุฑุงุฌุนุฉ ุงููุซููุฉ]
        A4{4. ูุฑุงุฑ ุงููุฑุงุฌุนุฉ}
        A5[5a. ุงูููุงููุฉ ุงููุจุงุดุฑุฉ<br/>approve โ finalapproval<br/>โ DocumentPolicy@update]
        A6[5b. ุงูุชุญููู ูููุฑุญูุฉ ุงูุชุงููุฉ<br/>forward โ next stage<br/>โ DocumentPolicy@update]
        A7[5c. ุงูุฑูุถ<br/>reject โ draft<br/>โ DocumentPolicy@update]
        A8[6. DocumentActivity::create<br/>'approved' / 'forwarded' / 'rejected']
        A9[7. ุฅุถุงูุฉ ููุงู ูุฑุนูุฉ<br/>DocumentTasks::addTask]
        A10[8. ุฅููุงู ููุงู<br/>DocumentTasks::markDone]
        A11[9. ุฃุฑุดูุฉ ุงููุซููุฉ<br/>DocumentTable::archiveDocument<br/>โ๏ธ ุจุฏูู Policy]
    end
    
    subgraph System["โ๏ธ ุงููุธุงู (System)"]
        S1[1. ุงูุชุญูู ูู ุงูุตูุงุญูุงุช<br/>DocumentPolicy@view]
        S2[2. ุงูุชุญูู ูู ุงูุตูุงุญูุงุช<br/>DocumentPolicy@update]
        S3[3. ุชุญุฏูุซ current_stage]
        S4[4. ุชุณุฌูู DocumentActivity]
        S5[5. ุนุฑุถ Toast Notification]
        S6[6. ุชุญุฏูุซ WorkflowOverview<br/>dispatch 'document-stage-changed']
        S7[7. ูุญุต Overdue Documents<br/>DocumentTable::overdue]
        S8[8. Bulk Actions<br/>DocumentTable::bulkAction<br/>โ๏ธ ุจุฏูู Policy]
    end
    
    subgraph Workflow["๐ ููุญุฉ ุณูุฑ ุงูุนูู<br/>WorkflowOverview"]
        W1[1. ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช<br/>totalDocuments, overdueDocuments]
        W2[2. ุนุฑุถ ุจุทุงูุงุช ุงููุฑุงุญู<br/>WorkflowStageCard ร 4]
        W3[3. ุนุฑุถ 3 ูุซุงุฆู ุญุฏูุซุฉ<br/>recentDocuments per stage]
        W4[4. ุชุบููุฑ ุงููุฑุญูุฉ<br/>advanceStage / rejectStage<br/>โ๏ธ visibleTo ููุท]
    end
    
    subgraph Tasks["โ ุงูููุงู ุงููุฑุนูุฉ<br/>DocumentTasks"]
        T1[1. ุฅุถุงูุฉ ูููุฉ<br/>addTask]
        T2[2. ุฅุณูุงุฏ ูููุฉ<br/>assigned_to]
        T3[3. ุฅููุงู ูููุฉ<br/>markDone]
        T4[4. ุฅุนุงุฏุฉ ูุชุญ ูููุฉ<br/>reopen]
        T5[5. ุญุฐู ูููุฉ<br/>deleteTask<br/>โ๏ธ ุจุฏูู Policy]
    end
    
    subgraph Archive["๐ฆ ุงูุฃุฑุดูู<br/>DocumentArchive"]
        AR1[1. ุนุฑุถ ุงููุซุงุฆู ุงููุคุฑุดูุฉ<br/>is_archived = true]
        AR2[2. ุฅูุบุงุก ุงูุฃุฑุดูุฉ<br/>unarchive<br/>โ๏ธ ุจุฏูู Policy]
        AR3[3. ุญุฐู ููุงุฆู<br/>forceDelete<br/>โ๏ธ ุจุฏูู Policy]
    end
    
    %% Connections
    C1 --> C2
    C2 --> C3
    C3 --> C4
    C4 --> C5
    C5 --> C6
    C6 --> S1
    S1 -->|โ ููุดุฆ ุฃู ููููู| C7
    C7 --> T1
    C6 --> C8
    C8 --> C9
    C9 --> S8
    
    A1 -.->|โ๏ธ ุบูุฑ ููุฌูุฏ| A2
    A2 --> S1
    S1 -->|โ ููุดุฆ ุฃู ููููู| A3
    A3 --> A4
    A4 -->|ููุงููุฉ| A5
    A4 -->|ุชุญููู| A6
    A4 -->|ุฑูุถ| A7
    A5 --> S2
    A6 --> S2
    A7 --> S2
    S2 -->|โ ุงูููููู ููุท| S3
    S3 --> A8
    A8 --> S4
    S4 --> S5
    S5 --> S6
    S6 --> W1
    A2 --> A9
    A9 --> T1
    A2 --> A10
    A10 --> T3
    A2 --> A11
    A11 --> S8
    
    W1 --> W2
    W2 --> W3
    W3 --> W4
    W4 -->|โ๏ธ visibleTo ููุท| S3
    
    T1 --> T2
    T2 --> T3
    T3 --> T4
    T4 --> T5
    
    C9 --> AR1
    AR1 --> AR2
    AR1 --> AR3
    
    %% Overdue detection
    S7 -->|review1 > 7 days<br/>proofread > 5 days<br/>finalapproval > 3 days| S5
    
    style C1 fill:#e3f2fd
    style A4 fill:#fff9c4
    style S2 fill:#c8e6c9
    style S8 fill:#ffcdd2
    style W4 fill:#ffcdd2
    style T5 fill:#ffcdd2
    style AR2 fill:#ffcdd2
    style AR3 fill:#ffcdd2
```

---

## 4. ุฌุฏูู ุงูุฎุทูุงุช ุงูุชูุตููู

| # | ุงูุฎุทูุฉ | ุงูุฏูุฑ | ุงูุฅุฌุฑุงุก | ุงููููู | ุงูุดุฑุท | ุงูุฎุทูุฉ ุงูุชุงููุฉ | โ๏ธ ุงููุดููุฉ |
|---|--------|------|---------|--------|-------|----------------|-----------|
| **1** | ุฅูุดุงุก ูุซููุฉ | ููุดุฆ | `DocumentUpload::save` | `DocumentUpload` | `auth()->id()` | ุงูุฎุทูุฉ 2 | - |
| **2** | ุฑูุน ุงูููู | ููุดุฆ | `store('documents', 'local')` | `DocumentUpload` | - | ุงูุฎุทูุฉ 3 | - |
| **3** | ุญูุธ ุงููุซููุฉ | ูุธุงู | `Document::create` | `DocumentUpload` | - | ุงูุฎุทูุฉ 4 | - |
| **4** | ุชุณุฌูู ุงูุฃูุดุทุฉ | ูุธุงู | `DocumentActivity::create` | `DocumentUpload` | - | ุงูุฎุทูุฉ 5 | - |
| **5** | ุฅุนุงุฏุฉ ุงูุชูุฌูู | ูุธุงู | `redirect('/documents')` | `DocumentUpload` | - | ุงูุฎุทูุฉ 6 | - |
| **6** | ุนุฑุถ ุงููุซููุฉ | ููุดุฆ/ููููู | `DocumentDetail::mount` | `DocumentDetail` | โ `DocumentPolicy@view` | ุงูุฎุทูุฉ 7 | - |
| **7** | ุฅุถุงูุฉ ููุงู | ููุดุฆ/ููููู | `DocumentTasks::addTask` | `DocumentTasks` | โ `visibleTo` | ุงูุฎุทูุฉ 8 | - |
| **8** | ูุฑุงุฌุนุฉ ุงููุซููุฉ | ููููู | ุนุฑุถ `DocumentDetail` | `DocumentDetail` | โ `DocumentPolicy@view` | ุงูุฎุทูุฉ 9 | - |
| **9** | ูุฑุงุฑ ุงููุฑุงุฌุนุฉ | ููููู | `approve()` / `forward()` / `reject()` | `DocumentDetail` | โ `DocumentPolicy@update` | ุงูุฎุทูุฉ 10 | - |
| **10** | ุงูุชุญูู ูู ุงูุตูุงุญูุงุช | ูุธุงู | `DocumentPolicy@update` | `DocumentDetail` | โ ุงูููููู ููุท | ุงูุฎุทูุฉ 11 | - |
| **11** | ุชุญุฏูุซ ุงููุฑุญูุฉ | ูุธุงู | `update(['current_stage'])` | `DocumentDetail` | - | ุงูุฎุทูุฉ 12 | - |
| **12** | ุชุณุฌูู ุงููุดุงุท | ูุธุงู | `DocumentActivity::create` | `DocumentDetail` | - | ุงูุฎุทูุฉ 13 | - |
| **13** | ุฅุดุนุงุฑ ุงููุณุชุฎุฏู | ูุธุงู | `dispatch('show-toast')` | `DocumentDetail` | - | ุงูุฎุทูุฉ 14 | โ๏ธ ูุง ุฅุดุนุงุฑุงุช |
| **14** | ุชุญุฏูุซ ููุญุฉ ุณูุฑ ุงูุนูู | ูุธุงู | `dispatch('document-stage-changed')` | `WorkflowStageCard` | - | ุงูุฎุทูุฉ 15 | - |
| **15** | ุนุฑุถ ููุญุฉ ุณูุฑ ุงูุนูู | ุฃู ูุณุชุฎุฏู | `WorkflowOverview` | `WorkflowOverview` | โ `visibleTo` | ุงูุฎุทูุฉ 16 | - |
| **16** | ุชุบููุฑ ุงููุฑุญูุฉ ูู ุงูููุญุฉ | ุฃู ูุณุชุฎุฏู | `advanceStage()` / `rejectStage()` | `WorkflowStageCard` | โ๏ธ `visibleTo` ููุท | ุงูุฎุทูุฉ 11 | โ ูุง Policy |
| **17** | ุฅุฌุฑุงุกุงุช ุฌูุงุนูุฉ | ุฃู ูุณุชุฎุฏู | `bulkAction()` | `DocumentTable` | โ๏ธ `visibleTo` ููุท | ุงูุฎุทูุฉ 11 | โ ูุง Policy |
| **18** | ุฃุฑุดูุฉ ุงููุซููุฉ | ุฃู ูุณุชุฎุฏู | `archiveDocument()` | `DocumentTable` | โ๏ธ `visibleTo` ููุท | ุงูุฎุทูุฉ 19 | โ ูุง Policy |
| **19** | ุนุฑุถ ุงูุฃุฑุดูู | ุฃู ูุณุชุฎุฏู | `DocumentArchive` | `DocumentArchive` | โ `visibleTo` | ุงูุฎุทูุฉ 20 | - |
| **20** | ุฅูุบุงุก ุงูุฃุฑุดูุฉ | ุฃู ูุณุชุฎุฏู | `unarchive()` | `DocumentArchive` | โ๏ธ `visibleTo` ููุท | ุงูุฎุทูุฉ 6 | โ ูุง Policy |
| **21** | ุญุฐู ููุงุฆู | ุฃู ูุณุชุฎุฏู | `forceDelete()` | `DocumentArchive` | โ๏ธ `visibleTo` ููุท | ููุงูุฉ | โ ูุง Policy |

---

## 5. ููุงุท ุงููุฑุงุฑ

### 5.1 ูุฑุงุฑ ุงููุฑุงุฌุนุฉ (Review Decision)

```mermaid
flowchart TD
    Start[ุงููุซููุฉ ูู ูุฑุญูุฉ Review1/Proofread] --> Review[ุงูููููู ูุฑุงุฌุน ุงููุซููุฉ]
    Review --> Decision{ูุฑุงุฑ ุงููุฑุงุฌุนุฉ}
    
    Decision -->|โ ููุงููุฉ| Approve[approve<br/>โ finalapproval]
    Decision -->|โก๏ธ ุชุญููู| Forward[forward<br/>โ ุงููุฑุญูุฉ ุงูุชุงููุฉ]
    Decision -->|โ ุฑูุถ| Reject[reject<br/>โ draft]
    
    Approve --> Activity1[DocumentActivity::create<br/>'approved']
    Forward --> Activity2[DocumentActivity::create<br/>'forwarded']
    Reject --> Activity3[DocumentActivity::create<br/>'rejected']
    
    Activity1 --> Toast1[Toast: 'ุชู ุงูููุงููุฉ']
    Activity2 --> Toast2[Toast: 'ุชู ุงูุชุญููู']
    Activity3 --> Toast3[Toast: 'ุชู ุงูุฑูุถ']
    
    Toast1 --> End[ููุงูุฉ]
    Toast2 --> End
    Toast3 --> Draft[ุงููุซููุฉ ุชุนูุฏ ูููุณูุฏุฉ]
    Draft --> Creator[ุงูููุดุฆ ูุณุชุทูุน ุงููุฑุงุฌุนุฉ]
```

### 5.2 ุงูุชุดุงู ุฎุทุฃ ูู ูุฑุญูุฉ ูุชูุฏูุฉ

**ุงูุณููุงุฑูู:** ูุซููุฉ ูู ูุฑุญูุฉ `proofread` ุฃู `finalapproval` ูุชู ุงูุชุดุงู ุฎุทุฃ.

| ุงูุญู ุงูุญุงูู | ุงููุตู | ุงููุดููุฉ |
|-------------|-------|---------|
| **reject()** | ุงูููููู ูุณุชุทูุน ุฑูุถ ุงููุซููุฉ ูุฅุฑุฌุงุนูุง ูู `draft` | โ ูุนูู |
| **bulkAction('stage_draft')** | ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ ูุณุชุทูุน ุฅุฑุฌุงุนูุง ูู `draft` | โ ุจุฏูู Policy |

**ุงูุชูุตูุฉ:** ุงุณุชุฎุฏุงู `reject()` ููุท (ูุญูู ุจู Policy).

### 5.3 ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช ุงููุชุฃุฎุฑุฉ (Overdue Documents)

**ุงูููุฏ ุงูููุฌูุฏ:** `DocumentTable::overdue`

```php
->when($this->overdue, function ($q) {
    $q->where(function ($sub) {
        $sub->where('current_stage', 'review1')
            ->where('updated_at', '<', now()->subDays(7));
        $sub->orWhere('current_stage', 'proofread')
            ->where('updated_at', '<', now()->subDays(5));
        $sub->orWhere('current_stage', 'finalapproval')
            ->where('updated_at', '<', now()->subDays(3));
    });
})
```

**ุงูููุงุนุฏ:**
- `review1` > 7 ุฃูุงู = ูุชุฃุฎุฑุฉ
- `proofread` > 5 ุฃูุงู = ูุชุฃุฎุฑุฉ
- `finalapproval` > 3 ุฃูุงู = ูุชุฃุฎุฑุฉ

**ุงููุดููุฉ:** โ๏ธ ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ ููููููู ุนูุฏ ุงูุชุฃุฎูุฑ.

---

## 6. ุงูุฎุฏูุงุช ุงููุณุงูุฏุฉ

### 6.1 DocumentTasks (ุงูููุงู ุงููุฑุนูุฉ)

| ุงูุฅุฌุฑุงุก | ุงูุฏูุฑ | ุงูุดุฑุท | ุงููุดููุฉ |
|---------|------|-------|---------|
| `addTask` | ููุดุฆ/ููููู | โ `visibleTo` | - |
| `markDone` | ููุดุฆ/ููููู | โ `visibleTo` | - |
| `reopen` | ููุดุฆ/ููููู | โ `visibleTo` | - |
| `deleteTask` | ููุดุฆ/ููููู | โ `visibleTo` | โ ูุง Policy |

**ุงูุชูุงุนู ูุน ุณูุฑ ุงูุนูู:**
- ุงูููุงู ุงููุฑุนูุฉ **ูุณุชููุฉ** ุนู ูุฑุงุญู ุงููุซููุฉ
- ูููู ุฅุถุงูุฉ ููุงู ูู ุฃู ูุฑุญูุฉ
- ูุง ุชุคุซุฑ ุงูููุงู ุนูู ุงูุชูุงู ุงููุฑุงุญู

### 6.2 Bulk Actions

| ุงูุฅุฌุฑุงุก | ุงูุฏูุฑ | ุงูุดุฑุท | ุงููุดููุฉ |
|---------|------|-------|---------|
| `bulkAction('archive')` | ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ | โ๏ธ `visibleTo` | โ ูุง Policy |
| `bulkAction('delete')` | ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ | โ๏ธ `visibleTo` | โ ูุง Policy |
| `bulkAction('stage_*')` | ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ | โ๏ธ `visibleTo` | โ ูุง Policy |

**ุงูุชูุงุนู ูุน ุณูุฑ ุงูุนูู:**
- ูููู ุชุบููุฑ ูุฑุญูุฉ **ุนุฏุฉ ูุซุงุฆู** ุฏูุนุฉ ูุงุญุฏุฉ
- โ๏ธ **ุฎุทุฑ:** ูููู ูุฃู ูุณุชุฎุฏู ุชุบููุฑ ูุฑุญูุฉ ูุซุงุฆู ููุณุช ูููููุฉ ูู

### 6.3 Export/Print

| ุงูุฅุฌุฑุงุก | ุงูุฏูุฑ | ุงูุดุฑุท | ุงูุญุงูุฉ |
|---------|------|-------|--------|
| `exportPdf` | ููุดุฆ/ููููู | โ `visibleTo` | โ ูุนูู |
| `download` | ููุดุฆ/ููููู | โ `DocumentPolicy@view` | โ๏ธ TODO (Phase 6) |

**ุงูุชูุงุนู ูุน ุณูุฑ ุงูุนูู:**
- ูููู ุชุตุฏูุฑ ุงููุซุงุฆู ูู **ุฃู ูุฑุญูุฉ**
- ูุง ูุคุซุฑ ุงูุชุตุฏูุฑ ุนูู ุณูุฑ ุงูุนูู

### 6.4 Notifications

**ุงูุญุงูุฉ ุงูุญุงููุฉ:** โ **ุบูุฑ ููุฌูุฏ**

**ุงููุทููุจ:**
- ุฅุดุนุงุฑ ุนูุฏ ุฅุณูุงุฏ ูุซููุฉ
- ุฅุดุนุงุฑ ุนูุฏ ุชุบููุฑ ุงููุฑุญูุฉ
- ุฅุดุนุงุฑ ุนูุฏ ุงูุชุฃุฎูุฑ (Overdue)
- ุฅุดุนุงุฑ ุนูุฏ ุงูุฑูุถ

---

## 7. ููุฎุต ุงูุชูุงุนูุงุช ุจูู ุงูุฃุฏูุงุฑ

### 7.1 ูู ูุณูุฏ ุงูููุงู ูููุ

| ุงููููุฉ | ูู | ุฅูู | ุงูุดุฑุท |
|--------|----|-----|-------|
| **ุฅุณูุงุฏ ูุซููุฉ** | โ๏ธ ุบูุฑ ููุฌูุฏ | - | ูุง ุชูุฌุฏ ูุงุฌูุฉ ูุชุบููุฑ `assignee_id` |
| **ุฅุณูุงุฏ ูููุฉ ูุฑุนูุฉ** | ููุดุฆ/ููููู | ุฃู ูุณุชุฎุฏู | โ `visibleTo` |

### 7.2 ูู ููุงูู ุนูู ุงูุงูุชูุงู ูููุฑุญูุฉ ุงูุชุงููุฉุ

| ุงูุงูุชูุงู | ูู | ุงูุดุฑุท |
|----------|----|-------|
| **forward()** | ููููู | โ `DocumentPolicy@update` |
| **approve()** | ููููู | โ `DocumentPolicy@update` |
| **reject()** | ููููู | โ `DocumentPolicy@update` |
| **advanceStage()** | โ๏ธ ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ | โ `visibleTo` ููุท |
| **bulkAction('stage_*')** | โ๏ธ ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ | โ `visibleTo` ููุท |

### 7.3 ูู ููููู ุงูุฃุฑุดูุฉุ

| ุงูุฅุฌุฑุงุก | ูู | ุงูุดุฑุท |
|---------|----|-------|
| **archiveDocument()** | โ๏ธ ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ | โ `visibleTo` ููุท |
| **bulkAction('archive')** | โ๏ธ ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ | โ `visibleTo` ููุท |

---

## 8. ุงูุชูุตูุงุช

### 8.1 ุฃููููุงุช ุนุงุฌูุฉ

1. โ **ุฅุถุงูุฉ ูุงุฌูุฉ ูุชุบููุฑ `assignee_id`**
   - Dropdown ูู `DocumentDetail` ุฃู `DocumentUpload`
   - Policy: ุงูููุดุฆ ููุท ูุณุชุทูุน ุชุบููุฑ ุงูููููู

2. โ **ุฅุตูุงุญ `WorkflowStageCard`**
   - ุงุณุชุฎุฏุงู `DocumentPolicy@update` ุจุฏูุงู ูู `visibleTo`

3. โ **ุฅุตูุงุญ `bulkAction`**
   - ุงุณุชุฎุฏุงู `DocumentPolicy@update` ูุชุบููุฑ ุงููุฑุญูุฉ
   - ุงุณุชุฎุฏุงู `DocumentPolicy@archive` ููุฃุฑุดูุฉ
   - ุงุณุชุฎุฏุงู `DocumentPolicy@delete` ููุญุฐู

4. โ **ุฅุถุงูุฉ ูุธุงู ุฅุดุนุงุฑุงุช**
   - ุฅุดุนุงุฑ ุนูุฏ ุฅุณูุงุฏ ูุซููุฉ
   - ุฅุดุนุงุฑ ุนูุฏ ุชุบููุฑ ุงููุฑุญูุฉ
   - ุฅุดุนุงุฑ ุนูุฏ ุงูุชุฃุฎูุฑ

### 8.2 ุชุญุณููุงุช

1. โ **ุฅุถุงูุฉ DocumentActivity ููุฃุฑุดูุฉ ูุงูุญุฐู**
2. โ **ุฅุถุงูุฉ ุชุฃููุฏ ูุจู ุงูุญุฐู ุงูููุงุฆู**
3. โ **ุฅุถุงูุฉ ุชุนูููุงุช ุนูุฏ ุงูุฑูุถ**

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2025-01-27  
**ุขุฎุฑ ุชุญุฏูุซ:** 2025-01-27  
**ุงูุฅุตุฏุงุฑ:** 1.0

