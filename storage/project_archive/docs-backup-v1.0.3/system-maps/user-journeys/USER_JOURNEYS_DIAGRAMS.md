---
**Updated:** 2025-12-22 - Defao v1.0.1  
**Status:** โ Production Ready  
**Features:** Workflow, Reports link, Arabic toasts  
---

# ูุฎุทุทุงุช ูุณุงุฑุงุช ุงููุณุชุฎุฏููู - Mermaid Diagrams

## 1. ูุณุงุฑ ุฅูุดุงุก ููุชุงุจุนุฉ ูุซููุฉ - ูุฎุทุท ุดุงูู

```mermaid
journey
    title ูุณุงุฑ ุฅูุดุงุก ููุชุงุจุนุฉ ูุซููุฉ
    section ุชุณุฌูู ุงูุฏุฎูู
      ุชุณุฌูู ุงูุฏุฎูู: 5: ุงููุณุชุฎุฏู
      ุนุฑุถ ููุญุฉ ุงูุชุญูู: 4: ุงููุณุชุฎุฏู
    section ุฑูุน ูุซููุฉ
      ุงูุงูุชูุงู ูุตูุญุฉ ุงููุซุงุฆู: 4: ุงููุณุชุฎุฏู
      ุงูููุฑ ุนูู "ุฑูุน ูุซููุฉ": 3: ุงููุณุชุฎุฏู
      ููุก ุงููููุฐุฌ: 3: ุงููุณุชุฎุฏู
      ุฑูุน ุงูููู: 2: ุงููุณุชุฎุฏู
      ุญูุธ ุงููุซููุฉ: 5: ุงููุณุชุฎุฏู
    section ูุชุงุจุนุฉ ุงููุซููุฉ
      ุนุฑุถ ุชูุงุตูู ุงููุซููุฉ: 5: ุงููุณุชุฎุฏู
      ุฅุถุงูุฉ ูููุฉ: 4: ุงููุณุชุฎุฏู
      ูุชุงุจุนุฉ ุงููุฑุงุญู: 5: ุงููุณุชุฎุฏู
    section ุณูุฑ ุงูุนูู
      ุงูููุงููุฉ/ุงูุฑูุถ: 4: ุงูููููู
      ุงูุชุญููู ูููุฑุญูุฉ ุงูุชุงููุฉ: 4: ุงูููููู
    section ุงูุฃุฑุดูุฉ
      ุฃุฑุดูุฉ ุงููุซููุฉ: 3: ุงููุณุชุฎุฏู
      ุนุฑุถ ุงูุฃุฑุดูู: 4: ุงููุณุชุฎุฏู
```

## 2. ูุณุงุฑ ุฅุฏุงุฑุฉ ุงูููุงู - ูุฎุทุท ุดุงูู

```mermaid
journey
    title ูุณุงุฑ ุฅุฏุงุฑุฉ ุงูููุงู
    section ุนุฑุถ ุงูููุงู
      ุงูุงูุชูุงู ูุตูุญุฉ ุงูููุงู: 4: ุงููุณุชุฎุฏู
      ุนุฑุถ ูุงุฆูุฉ ุงูููุงู: 5: ุงููุณุชุฎุฏู
      ุชุตููุฉ ุงูููุงู: 3: ุงููุณุชุฎุฏู
    section ุฅูุดุงุก ูููุฉ
      ูุชุญ ูููุฐุฌ ุงููููุฉ: 4: ุงููุณุชุฎุฏู
      ููุก ุจูุงูุงุช ุงููููุฉ: 3: ุงููุณุชุฎุฏู
      ุญูุธ ุงููููุฉ: 5: ุงููุณุชุฎุฏู
    section ุฅุฏุงุฑุฉ ูููุฉ
      ุนุฑุถ ุชูุงุตูู ุงููููุฉ: 4: ุงููุณุชุฎุฏู
      ุชุนุฏูู ุงููููุฉ: 3: ุงููุณุชุฎุฏู
      ุญุฐู ุงููููุฉ: 2: ุงููุณุชุฎุฏู
    section ููุงู ุงููุซููุฉ
      ุงูุงูุชูุงู ูุตูุญุฉ ุงููุซููุฉ: 4: ุงููุณุชุฎุฏู
      ุนุฑุถ ููุงู ุงููุซููุฉ: 5: ุงููุณุชุฎุฏู
      ุฅุถุงูุฉ ูููุฉ ูููุซููุฉ: 4: ุงููุณุชุฎุฏู
      ุฅููุงู/ุฅุนุงุฏุฉ ูุชุญ ูููุฉ: 4: ุงููุณุชุฎุฏู
```

## 3. ูุณุงุฑ ูุฑุงูุจุฉ ุณูุฑ ุงูุนูู - ูุฎุทุท ุดุงูู

```mermaid
journey
    title ูุณุงุฑ ูุฑุงูุจุฉ ุณูุฑ ุงูุนูู
    section ุนุฑุถ ููุญุฉ ุณูุฑ ุงูุนูู
      ุงูุงูุชูุงู ูุตูุญุฉ ุณูุฑ ุงูุนูู: 4: ุงููุณุชุฎุฏู
      ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช: 5: ุงููุณุชุฎุฏู
      ุนุฑุถ ุจุทุงูุงุช ุงููุฑุงุญู: 5: ุงููุณุชุฎุฏู
    section ุงูุชููู ุจูู ุงููุฑุงุญู
      ุนุฑุถ ูุซุงุฆู ุงููุฑุญูุฉ: 4: ุงููุณุชุฎุฏู
      ุงูููุฑ ุนูู ูุซููุฉ: 4: ุงููุณุชุฎุฏู
      ุนุฑุถ ุชูุงุตูู ุงููุซููุฉ: 5: ุงููุณุชุฎุฏู
    section ุชุบููุฑ ุงููุฑุญูุฉ
      ุฅุฑุณุงู ูููุฑุญูุฉ ุงูุชุงููุฉ: 4: ุงูููููู
      ุฅุฑุฌุงุน ูููุณูุฏุฉ: 3: ุงูููููู
    section ุงูุชุตุฏูุฑ
      ุชุตุฏูุฑ ุชูุฑูุฑ PDF: 3: ุงููุณุชุฎุฏู
```

## 4. ูุณุงุฑ ุงูุฃุฑุดูุฉ ูุงูุงุณุชุนุงุฏุฉ - ูุฎุทุท ุดุงูู

```mermaid
journey
    title ูุณุงุฑ ุงูุฃุฑุดูุฉ ูุงูุงุณุชุนุงุฏุฉ
    section ุงูุฃุฑุดูุฉ
      ุชุญุฏูุฏ ูุซุงุฆู: 3: ุงููุณุชุฎุฏู
      ุฃุฑุดูุฉ ุฌูุงุนูุฉ: 4: ุงููุณุชุฎุฏู
      ุฃุฑุดูุฉ ูุซููุฉ ูุงุญุฏุฉ: 4: ุงููุณุชุฎุฏู
    section ุนุฑุถ ุงูุฃุฑุดูู
      ุงูุงูุชูุงู ููุฃุฑุดูู: 4: ุงููุณุชุฎุฏู
      ุชุตููุฉ ุงูุฃุฑุดูู: 3: ุงููุณุชุฎุฏู
      ุนุฑุถ ุงููุซุงุฆู ุงููุคุฑุดูุฉ: 5: ุงููุณุชุฎุฏู
    section ุงูุงุณุชุนุงุฏุฉ
      ุงุณุชุนุงุฏุฉ ูุซููุฉ: 4: ุงููุณุชุฎุฏู
      ุญุฐู ููุงุฆู: 2: ุงููุณุชุฎุฏู
    section ุงููุญุฐููุงุช
      ุนุฑุถ ุงููุญุฐููุงุช: 4: ุงููุณุชุฎุฏู
      ุงุณุชุนุงุฏุฉ ูุญุฐููุฉ: 4: ุงููุณุชุฎุฏู
      ุญุฐู ููุงุฆู: 2: ุงููุณุชุฎุฏู
```

## 5. ูุฎุทุท ุชุฏูู ุดุงูู - ุฌููุน ุงููุณุงุฑุงุช

```mermaid
flowchart TB
    subgraph "ููุงุท ุงูุฏุฎูู"
        Login[ุชุณุฌูู ุงูุฏุฎูู<br/>/login]
        Dashboard[ููุญุฉ ุงูุชุญูู<br/>/dashboard]
    end
    
    subgraph "ูุณุงุฑ ุงููุซุงุฆู"
        DocsIndex[ูุงุฆูุฉ ุงููุซุงุฆู<br/>/documents]
        Upload[ุฑูุน ูุซููุฉ<br/>/documents/upload]
        DocDetail[ุชูุงุตูู ุงููุซููุฉ<br/>/documents/{id}]
        Archive[ุงูุฃุฑุดูู<br/>/documents/archive]
    end
    
    subgraph "ูุณุงุฑ ุงูููุงู"
        TasksIndex[ูุงุฆูุฉ ุงูููุงู<br/>/tasks]
        TaskForm[ูููุฐุฌ ุงููููุฉ<br/>Modal]
        DocTasks[ููุงู ุงููุซููุฉ<br/>Tab ูู DocumentDetail]
    end
    
    subgraph "ูุณุงุฑ ุณูุฑ ุงูุนูู"
        Workflow[ููุญุฉ ุณูุฑ ุงูุนูู<br/>/workflow]
        StageCard[ุจุทุงูุฉ ุงููุฑุญูุฉ<br/>WorkflowStageCard]
    end
    
    subgraph "ูุณุงุฑ ุงูุฃุฑุดูุฉ"
        Trash[ุงููุญุฐููุงุช<br/>/archive]
        Restore[ุงุณุชุนุงุฏุฉ]
        ForceDelete[ุญุฐู ููุงุฆู]
    end
    
    Login --> Dashboard
    Dashboard --> DocsIndex
    Dashboard --> TasksIndex
    Dashboard --> Workflow
    
    DocsIndex --> Upload
    DocsIndex --> DocDetail
    DocsIndex --> Archive
    
    Upload --> DocsIndex
    DocDetail --> DocTasks
    DocDetail --> Archive
    
    TasksIndex --> TaskForm
    DocDetail --> DocTasks
    
    Workflow --> StageCard
    StageCard --> DocDetail
    
    Archive --> Restore
    Archive --> ForceDelete
    
    DocsIndex --> Trash
    Trash --> Restore
    Trash --> ForceDelete
    
    style Login fill:#4a90e2
    style Dashboard fill:#4a90e2
    style DocDetail fill:#50c878
    style Workflow fill:#f39c12
    style Archive fill:#e74c3c
    style Trash fill:#e74c3c
```

## 6. ูุฎุทุท ุชูุงุนู ุงููุณุชุฎุฏู - User Interaction Flow

```mermaid
sequenceDiagram
    participant U as ุงููุณุชุฎุฏู
    participant DT as DocumentTable
    participant DU as DocumentUpload
    participant DD as DocumentDetail
    participant DTasks as DocumentTasks
    participant WO as WorkflowOverview
    participant WSC as WorkflowStageCard
    participant DA as DocumentArchive
    
    U->>DT: ุงูููุฑ ุนูู "ุฑูุน ูุซููุฉ"
    DT->>DU: redirect /documents/upload
    U->>DU: ููุก ุงููููุฐุฌ ูุฑูุน ุงูููู
    DU->>DU: Document::create
    DU->>DT: redirect /documents
    
    U->>DT: ุงูููุฑ ุนูู ูุซููุฉ
    DT->>DD: redirect /documents/{id}
    DD->>DD: DocumentPolicy@view
    DD->>U: ุนุฑุถ ุงููุซููุฉ
    
    U->>DD: ุงูููุฑ ุนูู ุชุจููุจ "ุงูููุงู"
    DD->>DTasks: ุนุฑุถ DocumentTasks
    U->>DTasks: ุฅุถุงูุฉ ูููุฉ
    DTasks->>DTasks: DocumentTask::create
    
    U->>DD: ุงูููุฑ ุนูู "ููุงููุฉ"
    DD->>DD: DocumentPolicy@update
    DD->>DD: ุชุญุฏูุซ current_stage
    DD->>U: โ ุชู ุงูููุงููุฉ
    
    U->>DT: ุชุญุฏูุฏ ูุซุงุฆู + ุฃุฑุดูุฉ
    DT->>DT: ุชุญุฏูุซ is_archived = true
    DT->>U: โ ุชู ุงูุฃุฑุดูุฉ
    
    U->>WO: ุงูุงูุชูุงู ูุณูุฑ ุงูุนูู
    WO->>WSC: ุนุฑุถ 4 ุจุทุงูุงุช ูุฑุงุญู
    U->>WSC: ุงูููุฑ ุนูู "ุฅุฑุณุงู ูููุฑุญูุฉ ุงูุชุงููุฉ"
    WSC->>WSC: visibleTo check
    WSC->>WSC: ุชุญุฏูุซ current_stage
    WSC->>WO: dispatch 'document-stage-changed'
    
    U->>DA: ุงูุงูุชูุงู ููุฃุฑุดูู
    DA->>DA: ุนุฑุถ is_archived = true
    U->>DA: ุงูููุฑ ุนูู "ุงุณุชุนุงุฏุฉ"
    DA->>DA: document.unarchive
    DA->>U: โ ุชู ุงูุงุณุชุนุงุฏุฉ
```

## 7. ูุฎุทุท ุญุงูุงุช ุงููุซููุฉ - Document State Machine

```mermaid
stateDiagram-v2
    [*] --> Draft: ุฅูุดุงุก ูุซููุฉ
    
    Draft --> Review1: forward (ุงูููููู)
    Draft --> Archived: archive (ุฃู ูุณุชุฎุฏู ูุฑู)
    Draft --> Deleted: delete (ุฃู ูุณุชุฎุฏู ูุฑู)
    
    Review1 --> Proofread: forward (ุงูููููู)
    Review1 --> Draft: reject (ุงูููููู)
    Review1 --> FinalApproval: approve (ุงูููููู)
    Review1 --> Archived: archive
    Review1 --> Deleted: delete
    
    Proofread --> FinalApproval: forward/approve (ุงูููููู)
    Proofread --> Draft: reject (ุงูููููู)
    Proofread --> Archived: archive
    Proofread --> Deleted: delete
    
    FinalApproval --> Draft: reject (ุงูููููู)
    FinalApproval --> Archived: archive
    FinalApproval --> Deleted: delete
    
    Archived --> Draft: unarchive (ุฃู ูุณุชุฎุฏู ูุฑู)
    Archived --> Deleted: forceDelete (ุฃู ูุณุชุฎุฏู ูุฑู)
    
    Deleted --> Draft: restore (ุฃู ูุณุชุฎุฏู ูุฑู)
    Deleted --> [*]: forceDelete (ุญุฐู ููุงุฆู)
    
    note right of Draft
        ุงููุณูุฏุฉ
        ุงูููุดุฆ: ุนุฑุถ ููุท
        ุงูููููู: ุนุฑุถ + ุชุญุฏูุซ
    end note
    
    note right of Review1
        ูุฑุงุฌุนุฉ ุฃููู
        ุงูููููู: ุนุฑุถ + ุชุญุฏูุซ + ููุงููุฉ/ุฑูุถ
    end note
    
    note right of Proofread
        ุชุฏููู
        ุงูููููู: ุนุฑุถ + ุชุญุฏูุซ + ููุงููุฉ/ุฑูุถ
    end note
    
    note right of FinalApproval
        ููุงููุฉ ููุงุฆูุฉ
        ุงูููููู: ุนุฑุถ + ุชุญุฏูุซ + ููุงููุฉ/ุฑูุถ
    end note
    
    note right of Archived
        ุฃุฑุดูู
        โ๏ธ ูุง ููุฌุฏ Policy
        ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ
    end note
    
    note right of Deleted
        ูุญุฐููุฉ (soft delete)
        โ๏ธ ูุง ููุฌุฏ Policy
        ุฃู ูุณุชุฎุฏู ูุฑู ุงููุซููุฉ
    end note
```

## 8. ูุฎุทุท ุญุงูุงุช ุงููููุฉ - Task State Machine

```mermaid
stateDiagram-v2
    [*] --> Pending: ุฅูุดุงุก ูููุฉ
    
    Pending --> InProgress: ุจุฏุก ุงูุชูููุฐ
    Pending --> Completed: ุฅููุงู ูุจุงุดุฑ
    Pending --> Deleted: ุญุฐู
    
    InProgress --> Completed: ุฅููุงู
    InProgress --> Pending: ุฅูุบุงุก
    InProgress --> Overdue: ุชุฌุงูุฒ ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
    InProgress --> Deleted: ุญุฐู
    
    Overdue --> InProgress: ุงุณุชุฆูุงู
    Overdue --> Completed: ุฅููุงู
    Overdue --> Deleted: ุญุฐู
    
    Completed --> Pending: ุฅุนุงุฏุฉ ูุชุญ
    Completed --> Deleted: ุญุฐู
    
    Deleted --> [*]: forceDelete
    
    note right of Pending
        ูุนููุฉ
        โ๏ธ ูุง ููุฌุฏ Policy
        ุฃู ูุณุชุฎุฏู ููููู ุงูุชุนุฏูู/ุงูุญุฐู
    end note
    
    note right of InProgress
        ููุฏ ุงูุชูููุฐ
        โ๏ธ ูุง ููุฌุฏ Policy
    end note
    
    note right of Completed
        ููุชููุฉ
        โ๏ธ ูุง ููุฌุฏ Policy
    end note
    
    note right of Overdue
        ูุชุฃุฎุฑุฉ
        โ๏ธ ูุง ููุฌุฏ Policy
    end note
```

## 9. ูุฎุทุท ููุงุท ุงูุงุญุชูุงู - Friction Points Map

```mermaid
mindmap
  root((ููุงุท ุงูุงุญุชูุงู))
    ุญุฑุฌุฉ ๐ด
      ุนุฏู ูุฌูุฏ TaskPolicy
        ุฃู ูุณุชุฎุฏู ููููู ุญุฐู/ุชุนุฏูู ุฃู ูููุฉ
      ุนุฏู ูุฌูุฏ Policy ูู WorkflowStageCard
        ุชุบููุฑ ุงููุฑุญูุฉ ุจุฏูู Policy
      ุนุฏู ูุฌูุฏ ุชุฃููุฏ ูุจู ุงูุญุฐู ุงูููุงุฆู
        ุญุฐู ููุงุฆู ุจุฏูู ุชุฃููุฏ
      ุนุฏู ูุฌูุฏ Policy ููุฃุฑุดูุฉ
        ุฃุฑุดูุฉ ุจุฏูู Policy
      ุนุฏู ูุฌูุฏ Policy ููุญุฐู
        ุญุฐู ุจุฏูู Policy
    ูุชูุณุทุฉ โ๏ธ
      ุนุฏู ุฅููุงููุฉ ุชุบููุฑ assignee_id
        ูุง ุชูุฌุฏ ูุงุฌูุฉ ูุชุบููุฑ ุงูููููู
      ุงูููุดุฆ ูุง ูุณุชุทูุน ุชุญุฏูุซ ุงููุซููุฉ
        ููุท ุงูููููู ูุณุชุทูุน ุงูุชุญุฏูุซ
      ุนุฏู ูุฌูุฏ ุฅุดุนุงุฑุงุช
        ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุฅุฌุฑุงุกุงุช
      ุนุฏู ูุฌูุฏ ุชุฃููุฏ ูุจู ุชุบููุฑ ุงููุฑุญูุฉ
        ุชุบููุฑ ูุจุงุดุฑ ุจุฏูู ุชุฃููุฏ
      ุนุฏู ูุฌูุฏ ุชุนููู ุนูุฏ ุงูุฑูุถ
        ูุง ููุฌุฏ ุณุจุจ ููุฑูุถ
    ููุฎูุถุฉ ๐ก
      ุนุฏู ูุฌูุฏ ุชุฃููุฏ ูุจู ุงูุฃุฑุดูุฉ
        ุฃุฑุดูุฉ ูุจุงุดุฑุฉ
      ุนุฏู ูุฌูุฏ ุชุนูููุงุช
        ุฒุฑ ุงูุชุนูููุงุช ูุง ูุนูู
      ุนุฏู ูุฌูุฏ ููุงุชุฑ ูุชูุฏูุฉ
        ููุงุชุฑ ูุญุฏูุฏุฉ
      ุนุฑุถ 3 ูุซุงุฆู ููุท
        ูููุฏ ุนูู ุงูุนุฑุถ
```

## 10. ูุฎุทุท ุฃููููุงุช ุงูุฅุตูุงุญ - Priority Matrix

```mermaid
quadrantChart
    title ุฃููููุงุช ุฅุตูุงุญ ููุงุท ุงูุงุญุชูุงู
    x-axis ููุฎูุถุฉ ุงูุชุฃุซูุฑ --> ุนุงููุฉ ุงูุชุฃุซูุฑ
    y-axis ุณููุฉ ุงูุชูููุฐ --> ุตุนุจุฉ ุงูุชูููุฐ
    quadrant-1 ุฅุตูุงุญุงุช ุณุฑูุนุฉ
    quadrant-2 ุฃููููุงุช ุนุงุฌูุฉ
    quadrant-3 ุชุญุณููุงุช ูุณุชูุจููุฉ
    quadrant-4 ูุดุงุฑูุน ูุจูุฑุฉ
    
    ุนุฏู ูุฌูุฏ ุชุฃููุฏ ูุจู ุงูุฃุฑุดูุฉ: [0.2, 0.8]
    ุนุฏู ูุฌูุฏ ุชุงุฑูุฎ ุชุนุฏูู: [0.3, 0.7]
    ุนุฏู ูุฌูุฏ Policy ููููุงู: [0.9, 0.3]
    ุนุฏู ูุฌูุฏ Policy ููุฃุฑุดูุฉ: [0.9, 0.4]
    ุนุฏู ูุฌูุฏ Policy ูู WorkflowStageCard: [0.9, 0.3]
    ุนุฏู ูุฌูุฏ ุชุฃููุฏ ูุจู ุงูุญุฐู: [0.8, 0.5]
    ุนุฏู ูุฌูุฏ ุฅุดุนุงุฑุงุช: [0.7, 0.6]
    ุนุฏู ุฅููุงููุฉ ุชุบููุฑ assignee_id: [0.6, 0.5]
    ุฅุถุงูุฉ ูุธุงู ุฅุดุนุงุฑุงุช ุดุงูู: [0.8, 0.8]
    ุฅุถุงูุฉ ุชุนูููุงุช: [0.5, 0.6]
```

---

**ููุงุญุธุฉ:** ุฌููุน ุงููุฎุทุทุงุช ูุจููุฉ ุนูู ุชุญููู ุงูููุฏ ุงููุนูู ูู ุงููุดุฑูุน.

